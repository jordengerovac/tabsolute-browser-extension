{"ast":null,"code":"import { FETCH_PHOTO, TOGGLE_PHOTO, SET_DEFAULT_PHOTO } from './types';\nimport store from '../store';\nexport const fetchPhoto = () => dispatch => {\n  const UNSPLASH_API_KEY = `${process.env.REACT_APP_UNSPLASH_API_KEY}`;\n  var totalPhotos = 0;\n  fetch(\"https://api.unsplash.com/collections/19428159/?client_id=\" + UNSPLASH_API_KEY).then(res => res.json()).then(result => {//totalPhotos = result.total_photos;\n  });\n  var last_photo_index = store.getState().photoDetails.lastPhotoIndex;\n  var random_page_num = Math.floor(Math.random() * totalPhotos);\n\n  while (random_page_num === last_photo_index) {\n    random_page_num = Math.floor(Math.random() * totalPhotos);\n  }\n\n  console.log(totalPhotos);\n  fetch(\"https://api.unsplash.com/collections/19428159/photos/?page=\" + random_page_num + \"&per_page=1&client_id=\" + UNSPLASH_API_KEY).then(res => res.json()).then(result => {\n    var photo = result[0];\n    dispatch({\n      type: FETCH_PHOTO,\n      payload: photo,\n      lastPhotoIndex: random_page_num\n    });\n  }).catch(function (error) {\n    console.log(error);\n  });\n};\nexport const togglePhoto = event => dispatch => {\n  dispatch({\n    type: TOGGLE_PHOTO,\n    payload: event\n  });\n};\nexport const setDefaultPhoto = () => dispatch => {\n  dispatch({\n    type: SET_DEFAULT_PHOTO\n  });\n};","map":{"version":3,"sources":["/Users/jordengerovac/Desktop/Programming/ChromeExtensionProjects/redux-tabsolute/src/actions/photoActions.js"],"names":["FETCH_PHOTO","TOGGLE_PHOTO","SET_DEFAULT_PHOTO","store","fetchPhoto","dispatch","UNSPLASH_API_KEY","process","env","REACT_APP_UNSPLASH_API_KEY","totalPhotos","fetch","then","res","json","result","last_photo_index","getState","photoDetails","lastPhotoIndex","random_page_num","Math","floor","random","console","log","photo","type","payload","catch","error","togglePhoto","event","setDefaultPhoto"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,YAAtB,EAAoCC,iBAApC,QAA6D,SAA7D;AACA,OAAOC,KAAP,MAAkB,UAAlB;AAEA,OAAO,MAAMC,UAAU,GAAG,MAAMC,QAAQ,IAAI;AAC1C,QAAMC,gBAAgB,GAAI,GAAEC,OAAO,CAACC,GAAR,CAAYC,0BAA2B,EAAnE;AACA,MAAIC,WAAW,GAAG,CAAlB;AAEAC,EAAAA,KAAK,CAAC,8DAA8DL,gBAA/D,CAAL,CACCM,IADD,CACMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADb,EAECF,IAFD,CAGGG,MAAD,IAAY,CACV;AACD,GALH;AAQA,MAAIC,gBAAgB,GAAGb,KAAK,CAACc,QAAN,GAAiBC,YAAjB,CAA8BC,cAArD;AACA,MAAIC,eAAe,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBb,WAA3B,CAAtB;;AACA,SAAOU,eAAe,KAAKJ,gBAA3B,EAA6C;AAC3CI,IAAAA,eAAe,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBb,WAA3B,CAAlB;AACD;;AACDc,EAAAA,OAAO,CAACC,GAAR,CAAYf,WAAZ;AACAC,EAAAA,KAAK,CAAC,gEAAgES,eAAhE,GAAkF,wBAAlF,GAA6Gd,gBAA9G,CAAL,CACCM,IADD,CACMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADb,EAECF,IAFD,CAGGG,MAAD,IAAY;AACV,QAAIW,KAAK,GAAGX,MAAM,CAAC,CAAD,CAAlB;AACAV,IAAAA,QAAQ,CAAC;AACPsB,MAAAA,IAAI,EAAE3B,WADC;AAEP4B,MAAAA,OAAO,EAAEF,KAFF;AAGPP,MAAAA,cAAc,EAAEC;AAHT,KAAD,CAAR;AAKH,GAVD,EAWCS,KAXD,CAWO,UAASC,KAAT,EAAgB;AACrBN,IAAAA,OAAO,CAACC,GAAR,CAAYK,KAAZ;AACD,GAbD;AAcD,CAhCM;AAkCP,OAAO,MAAMC,WAAW,GAAIC,KAAD,IAAW3B,QAAQ,IAAI;AAChDA,EAAAA,QAAQ,CAAC;AACPsB,IAAAA,IAAI,EAAE1B,YADC;AAEP2B,IAAAA,OAAO,EAAEI;AAFF,GAAD,CAAR;AAID,CALM;AAOP,OAAO,MAAMC,eAAe,GAAG,MAAM5B,QAAQ,IAAI;AAC/CA,EAAAA,QAAQ,CAAC;AACPsB,IAAAA,IAAI,EAAEzB;AADC,GAAD,CAAR;AAGD,CAJM","sourcesContent":["import { FETCH_PHOTO, TOGGLE_PHOTO, SET_DEFAULT_PHOTO } from './types';\nimport store from '../store';\n\nexport const fetchPhoto = () => dispatch => {\n  const UNSPLASH_API_KEY = `${process.env.REACT_APP_UNSPLASH_API_KEY}`;\n  var totalPhotos = 0;\n\n  fetch(\"https://api.unsplash.com/collections/19428159/?client_id=\" + UNSPLASH_API_KEY)\n  .then(res => res.json())\n  .then(\n    (result) => {\n      //totalPhotos = result.total_photos;\n    }\n  )\n\n  var last_photo_index = store.getState().photoDetails.lastPhotoIndex;\n  var random_page_num = Math.floor(Math.random() * totalPhotos);\n  while (random_page_num === last_photo_index) {\n    random_page_num = Math.floor(Math.random() * totalPhotos);\n  }\n  console.log(totalPhotos);\n  fetch(\"https://api.unsplash.com/collections/19428159/photos/?page=\" + random_page_num + \"&per_page=1&client_id=\" + UNSPLASH_API_KEY)\n  .then(res => res.json())\n  .then(\n    (result) => {\n      var photo = result[0];\n      dispatch({\n        type: FETCH_PHOTO,\n        payload: photo,\n        lastPhotoIndex: random_page_num\n    });\n  })\n  .catch(function(error) {\n    console.log(error);\n  });\n}\n\nexport const togglePhoto = (event) => dispatch => {\n  dispatch({\n    type: TOGGLE_PHOTO,\n    payload: event\n  })\n}\n\nexport const setDefaultPhoto = () => dispatch => {\n  dispatch({\n    type: SET_DEFAULT_PHOTO\n  })\n}\n"]},"metadata":{},"sourceType":"module"}