{"ast":null,"code":"import _toConsumableArray from\"/Users/jordengerovac/Desktop/Programming/ChromeExtensionProjects/tabsolute-react-extension/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/jordengerovac/Desktop/Programming/ChromeExtensionProjects/tabsolute-react-extension/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jordengerovac/Desktop/Programming/ChromeExtensionProjects/tabsolute-react-extension/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jordengerovac/Desktop/Programming/ChromeExtensionProjects/tabsolute-react-extension/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jordengerovac/Desktop/Programming/ChromeExtensionProjects/tabsolute-react-extension/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import'./App.css';import React from'react';import SettingsBar from'./components/SettingsBar';import WeatherStatus from'./components/WeatherStatus';import{v4 as uuid}from'uuid';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.toggleSettings=function(){var toggle=\"\";if(_this.state.settingsVisible===\"true\"){toggle=\"false\";}else{toggle=\"true\";}_this.setState({settingsVisible:toggle},function(){return localStorage.setItem(\"state\",JSON.stringify(_this.state));});};_this.handleNameChange=function(e){_this.setState({widgets:_this.state.widgets.map(function(widget){if(widget.id===e.target.id){widget.value=e.target.value;}return widget;})},function(){return localStorage.setItem(\"state\",JSON.stringify(_this.state));});};_this.handleDelete=function(e){var newWidgetsState=_this.state.widgets.filter(function(widget){return e.target.id!==widget.id;});_this.setState({widgets:newWidgetsState},function(){return localStorage.setItem(\"state\",JSON.stringify(_this.state));});};_this.addNewWidget=function(e){e.preventDefault();var newWidget={id:uuid(),type:e.target[0].value,value:\"\"};_this.setState({widgets:[].concat(_toConsumableArray(_this.state.widgets),[newWidget])},function(){return localStorage.setItem(\"state\",JSON.stringify(_this.state));});};_this.getRandomQuote=function(){fetch('https://type.fit/api/quotes').then(function(res){return res.json();}).then(function(result){var random_num=Math.floor(Math.random()*result.length);_this.setState({quoteText:result[random_num].text,quoteAuthor:result[random_num].author});});};_this.getWeatherStatus=function(city,id){var WEATHER_API_KEY=\"\".concat(process.env.REACT_APP_WEATHER_API_KEY);fetch('https://api.openweathermap.org/data/2.5/weather?q='+city+'&units=metric&appid='+WEATHER_API_KEY).then(function(res){return res.json();}).then(function(result){if(result.hasOwnProperty(\"main\")){_this.setState({temp:result.main.temp,feelsLike:result.main.feels_like,clouds:result.weather[0].description},function(){return localStorage.setItem(\"state\",JSON.stringify(_this.state));});}},function(error){console.log(\"error\");});};_this.handleCityChange=function(e){if(e.key===\"Enter\"){_this.setState({widgets:_this.state.widgets.map(function(widget){if(widget.id===e.target.id){widget.value=e.target.value;}return widget;})},function(){return localStorage.setItem(\"state\",JSON.stringify(_this.state));});_this.getWeatherStatus(e.target.value,e.target.id);}};_this.tick=function(){var current_time=new Date();_this.setState({time:current_time});if(current_time.getMinutes()%5===0&&current_time.getSeconds()===0){_this.setState({refresh:\"true\"},function(){return localStorage.setItem(\"state\",JSON.stringify(_this.state));});}};_this.state={count:0,photo:\"\",time:new Date(),refresh:\"false\",settingsVisible:\"false\",city:\"toronto\",name:\"\",feelsLike:\"\",temp:\"\",clouds:\"\",quoteText:\"\",quoteAuthor:\"\",widgets:[{id:\"1\",type:\"greeting\",value:\"\"},{id:\"2\",type:\"time\",value:\"\"},{id:\"3\",type:\"quote\",value:\"\"}]};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var UNSPLASH_API_KEY=\"\".concat(process.env.REACT_APP_UNSPLASH_API_KEY);/*\n    const parsedCount = Number(localStorage.getItem(\"count\") || 0);\n    const getPhoto = String(localStorage.getItem(\"photo\") || \"\");\n    const getRefresh = String(localStorage.getItem(\"refresh\") || \"false\");\n    const getName = String(localStorage.getItem(\"name\") || \"\");\n    */var getState=JSON.parse(localStorage.getItem(\"state\"));if(getState===null){localStorage.setItem(\"state\",JSON.stringify(this.state));getState=JSON.parse(localStorage.getItem(\"state\"));}this.setState(getState);// GET photo\nif(getState.photo===\"\"||getState.refresh===\"true\"){fetch(\"https://api.unsplash.com/collections/764604/photos/?orientation=landscape&per_page=100&client_id=\"+UNSPLASH_API_KEY).then(function(res){return res.json();}).then(function(result){var random_num=Math.floor(Math.random()*result.length);_this2.setState({photo:result[random_num].urls.regular,refresh:\"false\"},function(){return localStorage.setItem(\"state\",JSON.stringify(_this2.state));});//localStorage.setItem(\"photo\", result[random_num].urls.regular);\n//localStorage.setItem(\"refresh\", \"false\");\n},// Note: it's important to handle errors here\n// instead of a catch() block so that we don't swallow\n// exceptions from actual bugs in components.\nfunction(error){console.log(\"error\");});}// GET weather data\n// this.getWeatherStatus(this.state.city);\n// GET random quote\nthis.getRandomQuote();setInterval(function(){_this2.tick();},1000);}},{key:\"render\",value:function render(){var _this3=this;var current_time=new Date();var greeting=\"\";var ampm=current_time.getHours()>=12?'PM':'AM';if(current_time.getHours()>=21){greeting=\"night\";}else if(current_time.getHours()>=18){greeting=\"evening\";}else if(current_time.getHours()>=12){greeting=\"afternoon\";}else{greeting=\"morning\";}return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundImage:'url('+this.state.photo+')',width:'100vw',height:'100vh',backgroundSize:'cover',margin:'0',padding:'0',backgroundRepeat:'no-repeat'},children:[/*#__PURE__*/_jsx(SettingsBar,{settingsVisible:this.state.settingsVisible,toggleSettings:this.toggleSettings,handleNameChange:this.handleNameChange,name:this.state.name,city:this.state.city,handleCityChange:this.handleCityChange,addNewWidget:this.addNewWidget,widgets:this.state.widgets,handleDelete:this.handleDelete}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsx(\"i\",{style:{color:'white',fontSize:'22px',margin:'7px'},className:\"fas fa-cog\",onClick:this.toggleSettings}),/*#__PURE__*/_jsx(\"div\",{style:{float:'right'},children:this.state.widgets.map(function(widget){if(widget.type===\"weather\")return/*#__PURE__*/_jsx(WeatherStatus,{city:widget.value,feelsLike:_this3.state.feelsLike,temp:_this3.state.temp,clouds:_this3.state.clouds});})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"centered\",style:{textAlign:'center'},children:this.state.widgets.map(function(widget){if(widget.type===\"greeting\")return/*#__PURE__*/_jsxs(\"h3\",{style:{margin:'0',color:'white'},children:[\"Good \",greeting,\", \",widget.value]});else if(widget.type===\"quote\"){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{color:'white'},children:_this3.state.quoteText}),/*#__PURE__*/_jsxs(\"h4\",{style:{color:'white'},children:[\"- \",_this3.state.quoteAuthor]})]});}else if(widget.type===\"time\"){return/*#__PURE__*/_jsxs(\"h1\",{style:{margin:'0',color:'white'},children:[current_time.toLocaleTimeString().split(\":\")[0],\":\",current_time.toLocaleTimeString().split(\":\")[1],\" \",ampm]});}})})]});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/jordengerovac/Desktop/Programming/ChromeExtensionProjects/tabsolute-react-extension/src/App.js"],"names":["React","SettingsBar","WeatherStatus","v4","uuid","App","toggleSettings","toggle","state","settingsVisible","setState","localStorage","setItem","JSON","stringify","handleNameChange","e","widgets","map","widget","id","target","value","handleDelete","newWidgetsState","filter","addNewWidget","preventDefault","newWidget","type","getRandomQuote","fetch","then","res","json","result","random_num","Math","floor","random","length","quoteText","text","quoteAuthor","author","getWeatherStatus","city","WEATHER_API_KEY","process","env","REACT_APP_WEATHER_API_KEY","hasOwnProperty","temp","main","feelsLike","feels_like","clouds","weather","description","error","console","log","handleCityChange","key","tick","current_time","Date","time","getMinutes","getSeconds","refresh","count","photo","name","UNSPLASH_API_KEY","REACT_APP_UNSPLASH_API_KEY","getState","parse","getItem","urls","regular","setInterval","greeting","ampm","getHours","backgroundImage","width","height","backgroundSize","margin","padding","backgroundRepeat","color","fontSize","float","textAlign","toLocaleTimeString","split","Component"],"mappings":"6gCAAA,MAAO,WAAP,CACA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,MAAOC,CAAAA,aAAP,KAA0B,4BAA1B,CACA,OAASC,EAAE,GAAIC,CAAAA,IAAf,KAA2B,MAA3B,C,2FAEMC,CAAAA,G,sGACJ,cAAc,qCACZ,wBADY,MAmCdC,cAnCc,CAmCG,UAAM,CACrB,GAAIC,CAAAA,MAAM,CAAG,EAAb,CACA,GAAI,MAAKC,KAAL,CAAWC,eAAX,GAA+B,MAAnC,CAA2C,CACzCF,MAAM,CAAG,OAAT,CACD,CAFD,IAGK,CACHA,MAAM,CAAG,MAAT,CACD,CACD,MAAKG,QAAL,CAAc,CACZD,eAAe,CAAEF,MADL,CAAd,CAEG,iBAAMI,CAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAe,MAAKN,KAApB,CAA9B,CAAN,EAFH,EAGD,CA9Ca,OAgDdO,gBAhDc,CAgDK,SAACC,CAAD,CAAO,CACxB,MAAKN,QAAL,CAAc,CACZO,OAAO,CAAE,MAAKT,KAAL,CAAWS,OAAX,CAAmBC,GAAnB,CAAuB,SAACC,MAAD,CAAY,CAC1C,GAAIA,MAAM,CAACC,EAAP,GAAcJ,CAAC,CAACK,MAAF,CAASD,EAA3B,CAA+B,CAC7BD,MAAM,CAACG,KAAP,CAAeN,CAAC,CAACK,MAAF,CAASC,KAAxB,CACD,CACD,MAAOH,CAAAA,MAAP,CACD,CALQ,CADG,CAAd,CAOG,iBAAMR,CAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAe,MAAKN,KAApB,CAA9B,CAAN,EAPH,EAQD,CAzDa,OA2Dde,YA3Dc,CA2DC,SAACP,CAAD,CAAO,CACpB,GAAMQ,CAAAA,eAAe,CAAG,MAAKhB,KAAL,CAAWS,OAAX,CAAmBQ,MAAnB,CAA0B,SAAAN,MAAM,QAAIH,CAAAA,CAAC,CAACK,MAAF,CAASD,EAAT,GAAgBD,MAAM,CAACC,EAA3B,EAAhC,CAAxB,CACA,MAAKV,QAAL,CAAc,CACZO,OAAO,CAAEO,eADG,CAAd,CAEG,iBAAMb,CAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAe,MAAKN,KAApB,CAA9B,CAAN,EAFH,EAGD,CAhEa,OAkEdkB,YAlEc,CAkEC,SAACV,CAAD,CAAO,CACpBA,CAAC,CAACW,cAAF,GACA,GAAMC,CAAAA,SAAS,CAAG,CAChBR,EAAE,CAAEhB,IAAI,EADQ,CAEhByB,IAAI,CAAEb,CAAC,CAACK,MAAF,CAAS,CAAT,EAAYC,KAFF,CAGhBA,KAAK,CAAE,EAHS,CAAlB,CAKA,MAAKZ,QAAL,CAAc,CACZO,OAAO,8BAAM,MAAKT,KAAL,CAAWS,OAAjB,GAA0BW,SAA1B,EADK,CAAd,CAEG,iBAAMjB,CAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAe,MAAKN,KAApB,CAA9B,CAAN,EAFH,EAGD,CA5Ea,OA8EdsB,cA9Ec,CA8EG,UAAM,CACrBC,KAAK,CAAC,6BAAD,CAAL,CACGC,IADH,CACQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADX,EAEGF,IAFH,CAGE,SAACG,MAAD,CAAY,CACV,GAAIC,CAAAA,UAAU,CAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAgBJ,MAAM,CAACK,MAAlC,CAAjB,CACA,MAAK9B,QAAL,CAAc,CACZ+B,SAAS,CAAEN,MAAM,CAACC,UAAD,CAAN,CAAmBM,IADlB,CAEZC,WAAW,CAAER,MAAM,CAACC,UAAD,CAAN,CAAmBQ,MAFpB,CAAd,EAID,CATH,EAWD,CA1Fa,OA4FdC,gBA5Fc,CA4FK,SAACC,IAAD,CAAO1B,EAAP,CAAc,CAC/B,GAAM2B,CAAAA,eAAe,WAAMC,OAAO,CAACC,GAAR,CAAYC,yBAAlB,CAArB,CACAnB,KAAK,CAAC,qDAAuDe,IAAvD,CAA8D,sBAA9D,CAAuFC,eAAxF,CAAL,CACGf,IADH,CACQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADX,EAEGF,IAFH,CAGE,SAACG,MAAD,CAAY,CACV,GAAIA,MAAM,CAACgB,cAAP,CAAsB,MAAtB,CAAJ,CAAmC,CACjC,MAAKzC,QAAL,CAAc,CACZ0C,IAAI,CAAEjB,MAAM,CAACkB,IAAP,CAAYD,IADN,CAEZE,SAAS,CAAEnB,MAAM,CAACkB,IAAP,CAAYE,UAFX,CAGZC,MAAM,CAAErB,MAAM,CAACsB,OAAP,CAAe,CAAf,EAAkBC,WAHd,CAAd,CAIG,iBAAM/C,CAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAe,MAAKN,KAApB,CAA9B,CAAN,EAJH,EAKD,CACF,CAXH,CAYE,SAACmD,KAAD,CAAW,CACPC,OAAO,CAACC,GAAR,CAAY,OAAZ,EACH,CAdH,EAgBH,CA9Ge,OAgHdC,gBAhHc,CAgHK,SAAC9C,CAAD,CAAO,CACxB,GAAIA,CAAC,CAAC+C,GAAF,GAAU,OAAd,CAAuB,CACrB,MAAKrD,QAAL,CAAc,CACZO,OAAO,CAAE,MAAKT,KAAL,CAAWS,OAAX,CAAmBC,GAAnB,CAAuB,SAACC,MAAD,CAAY,CAC1C,GAAIA,MAAM,CAACC,EAAP,GAAcJ,CAAC,CAACK,MAAF,CAASD,EAA3B,CAA+B,CAC7BD,MAAM,CAACG,KAAP,CAAeN,CAAC,CAACK,MAAF,CAASC,KAAxB,CACD,CACD,MAAOH,CAAAA,MAAP,CACD,CALQ,CADG,CAAd,CAOG,iBAAMR,CAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAe,MAAKN,KAApB,CAA9B,CAAN,EAPH,EAQA,MAAKqC,gBAAL,CAAsB7B,CAAC,CAACK,MAAF,CAASC,KAA/B,CAAsCN,CAAC,CAACK,MAAF,CAASD,EAA/C,EACD,CACF,CA5Ha,OA8Hd4C,IA9Hc,CA8HP,UAAM,CACX,GAAIC,CAAAA,YAAY,CAAG,GAAIC,CAAAA,IAAJ,EAAnB,CACA,MAAKxD,QAAL,CAAc,CACZyD,IAAI,CAAEF,YADM,CAAd,EAIA,GAAIA,YAAY,CAACG,UAAb,GAA4B,CAA5B,GAAkC,CAAlC,EAAuCH,YAAY,CAACI,UAAb,KAA8B,CAAzE,CAA4E,CAC1E,MAAK3D,QAAL,CAAc,CACZ4D,OAAO,CAAE,MADG,CAAd,CAEG,iBAAM3D,CAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAe,MAAKN,KAApB,CAA9B,CAAN,EAFH,EAGD,CACF,CAzIa,CAEZ,MAAKA,KAAL,CAAa,CACX+D,KAAK,CAAE,CADI,CAEXC,KAAK,CAAE,EAFI,CAGXL,IAAI,CAAE,GAAID,CAAAA,IAAJ,EAHK,CAIXI,OAAO,CAAE,OAJE,CAKX7D,eAAe,CAAE,OALN,CAMXqC,IAAI,CAAE,SANK,CAOX2B,IAAI,CAAE,EAPK,CAQXnB,SAAS,CAAE,EARA,CASXF,IAAI,CAAE,EATK,CAUXI,MAAM,CAAE,EAVG,CAWXf,SAAS,CAAE,EAXA,CAYXE,WAAW,CAAE,EAZF,CAaX1B,OAAO,CAAE,CACP,CACEG,EAAE,CAAE,GADN,CAEES,IAAI,CAAE,UAFR,CAGEP,KAAK,CAAE,EAHT,CADO,CAMP,CACEF,EAAE,CAAE,GADN,CAEES,IAAI,CAAE,MAFR,CAGEP,KAAK,CAAE,EAHT,CANO,CAWP,CACEF,EAAE,CAAE,GADN,CAEES,IAAI,CAAE,OAFR,CAGEP,KAAK,CAAE,EAHT,CAXO,CAbE,CAAb,CAFY,aAiCb,C,iDA2GD,4BAAoB,iBAClB,GAAMoD,CAAAA,gBAAgB,WAAM1B,OAAO,CAACC,GAAR,CAAY0B,0BAAlB,CAAtB,CACA;AACJ;AACA;AACA;AACA;AACA,MAEI,GAAIC,CAAAA,QAAQ,CAAG/D,IAAI,CAACgE,KAAL,CAAWlE,YAAY,CAACmE,OAAb,CAAqB,OAArB,CAAX,CAAf,CACA,GAAIF,QAAQ,GAAK,IAAjB,CAAuB,CACrBjE,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAe,KAAKN,KAApB,CAA9B,EACAoE,QAAQ,CAAG/D,IAAI,CAACgE,KAAL,CAAWlE,YAAY,CAACmE,OAAb,CAAqB,OAArB,CAAX,CAAX,CACD,CACD,KAAKpE,QAAL,CAAckE,QAAd,EAEA;AACA,GAAIA,QAAQ,CAACJ,KAAT,GAAmB,EAAnB,EAAyBI,QAAQ,CAACN,OAAT,GAAqB,MAAlD,CAA0D,CACxDvC,KAAK,CAAC,oGAAsG2C,gBAAvG,CAAL,CACG1C,IADH,CACQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADX,EAEGF,IAFH,CAGI,SAACG,MAAD,CAAY,CACV,GAAIC,CAAAA,UAAU,CAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAgBJ,MAAM,CAACK,MAAlC,CAAjB,CACA,MAAI,CAAC9B,QAAL,CAAc,CACZ8D,KAAK,CAAErC,MAAM,CAACC,UAAD,CAAN,CAAmB2C,IAAnB,CAAwBC,OADnB,CAEZV,OAAO,CAAE,OAFG,CAAd,CAGG,iBAAM3D,CAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAe,MAAI,CAACN,KAApB,CAA9B,CAAN,EAHH,EAIA;AACA;AACD,CAXL,CAYI;AACA;AACA;AACA,SAACmD,KAAD,CAAW,CACTC,OAAO,CAACC,GAAR,CAAY,OAAZ,EACD,CAjBL,EAmBD,CAED;AACA;AAEA;AACA,KAAK/B,cAAL,GAEAmD,WAAW,CAAC,UAAM,CAChB,MAAI,CAACjB,IAAL,GACD,CAFU,CAER,IAFQ,CAAX,CAGD,C,sBAED,iBAAQ,iBACN,GAAMC,CAAAA,YAAY,CAAG,GAAIC,CAAAA,IAAJ,EAArB,CACA,GAAIgB,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIC,CAAAA,IAAI,CAAGlB,YAAY,CAACmB,QAAb,IAA2B,EAA3B,CAAgC,IAAhC,CAAuC,IAAlD,CACA,GAAInB,YAAY,CAACmB,QAAb,IAA2B,EAA/B,CAAmC,CACjCF,QAAQ,CAAG,OAAX,CACD,CAFD,IAGK,IAAIjB,YAAY,CAACmB,QAAb,IAA2B,EAA/B,CAAmC,CACtCF,QAAQ,CAAG,SAAX,CACD,CAFI,IAGA,IAAIjB,YAAY,CAACmB,QAAb,IAA2B,EAA/B,CAAmC,CACtCF,QAAQ,CAAG,WAAX,CACD,CAFI,IAGA,CACHA,QAAQ,CAAG,SAAX,CACD,CAED,mBACE,aAAK,KAAK,CAAE,CAACG,eAAe,CAAE,OAAS,KAAK7E,KAAL,CAAWgE,KAApB,CAA4B,GAA9C,CAAmDc,KAAK,CAAE,OAA1D,CAAmEC,MAAM,CAAE,OAA3E,CAAoFC,cAAc,CAAE,OAApG,CAA6GC,MAAM,CAAE,GAArH,CAA0HC,OAAO,CAAE,GAAnI,CAAwIC,gBAAgB,CAAE,WAA1J,CAAZ,wBACE,KAAC,WAAD,EAAa,eAAe,CAAE,KAAKnF,KAAL,CAAWC,eAAzC,CAA0D,cAAc,CAAE,KAAKH,cAA/E,CAA+F,gBAAgB,CAAE,KAAKS,gBAAtH,CAAwI,IAAI,CAAE,KAAKP,KAAL,CAAWiE,IAAzJ,CAA+J,IAAI,CAAE,KAAKjE,KAAL,CAAWsC,IAAhL,CAAsL,gBAAgB,CAAE,KAAKgB,gBAA7M,CAA+N,YAAY,CAAE,KAAKpC,YAAlP,CAAgQ,OAAO,CAAE,KAAKlB,KAAL,CAAWS,OAApR,CAA6R,YAAY,CAAE,KAAKM,YAAhT,EADF,cAEE,aAAK,SAAS,CAAC,UAAf,wBACE,UAAG,KAAK,CAAE,CAACqE,KAAK,CAAE,OAAR,CAAiBC,QAAQ,CAAE,MAA3B,CAAmCJ,MAAM,CAAE,KAA3C,CAAV,CAA6D,SAAS,CAAC,YAAvE,CAAoF,OAAO,CAAE,KAAKnF,cAAlG,EADF,cAEE,YAAK,KAAK,CAAE,CAACwF,KAAK,CAAC,OAAP,CAAZ,UACG,KAAKtF,KAAL,CAAWS,OAAX,CAAmBC,GAAnB,CAAuB,SAACC,MAAD,CAAY,CAClC,GAAIA,MAAM,CAACU,IAAP,GAAgB,SAApB,CACE,mBAAQ,KAAC,aAAD,EAAe,IAAI,CAAEV,MAAM,CAACG,KAA5B,CAAmC,SAAS,CAAE,MAAI,CAACd,KAAL,CAAW8C,SAAzD,CAAoE,IAAI,CAAE,MAAI,CAAC9C,KAAL,CAAW4C,IAArF,CAA2F,MAAM,CAAE,MAAI,CAAC5C,KAAL,CAAWgD,MAA9G,EAAR,CACH,CAHA,CADH,EAFF,GAFF,cAWI,YAAK,SAAS,CAAC,UAAf,CAA0B,KAAK,CAAE,CAACuC,SAAS,CAAE,QAAZ,CAAjC,UACC,KAAKvF,KAAL,CAAWS,OAAX,CAAmBC,GAAnB,CAAuB,SAACC,MAAD,CAAY,CAClC,GAAIA,MAAM,CAACU,IAAP,GAAgB,UAApB,CACE,mBAAQ,YAAI,KAAK,CAAE,CAAC4D,MAAM,CAAE,GAAT,CAAcG,KAAK,CAAE,OAArB,CAAX,mBAAgDV,QAAhD,MAA4D/D,MAAM,CAACG,KAAnE,GAAR,CADF,IAEK,IAAIH,MAAM,CAACU,IAAP,GAAgB,OAApB,CAA6B,CAChC,mBAAQ,oCAAK,WAAI,KAAK,CAAE,CAAC+D,KAAK,CAAE,OAAR,CAAX,UAA8B,MAAI,CAACpF,KAAL,CAAWiC,SAAzC,EAAL,cAA6D,YAAI,KAAK,CAAE,CAACmD,KAAK,CAAE,OAAR,CAAX,gBAAgC,MAAI,CAACpF,KAAL,CAAWmC,WAA3C,GAA7D,GAAR,CACA,CAFG,IAGA,IAAIxB,MAAM,CAACU,IAAP,GAAgB,MAApB,CAA4B,CAC/B,mBAAQ,YAAI,KAAK,CAAE,CAAC4D,MAAM,CAAE,GAAT,CAAcG,KAAK,CAAE,OAArB,CAAX,WAA2C3B,YAAY,CAAC+B,kBAAb,GAAkCC,KAAlC,CAAwC,GAAxC,EAA6C,CAA7C,CAA3C,KAA6FhC,YAAY,CAAC+B,kBAAb,GAAkCC,KAAlC,CAAwC,GAAxC,EAA6C,CAA7C,CAA7F,KAA+Id,IAA/I,GAAR,CACA,CACD,CATF,CADD,EAXJ,GADF,CA2BD,C,iBA3OenF,KAAK,CAACkG,S,EA8OxB,cAAe7F,CAAAA,GAAf","sourcesContent":["import './App.css';\nimport React from 'react';\nimport SettingsBar from './components/SettingsBar';\nimport WeatherStatus from './components/WeatherStatus';\nimport { v4 as uuid } from 'uuid';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {      \n      count: 0,\n      photo: \"\",\n      time: new Date(),\n      refresh: \"false\",\n      settingsVisible: \"false\",\n      city: \"toronto\",\n      name: \"\",\n      feelsLike: \"\",\n      temp: \"\",\n      clouds: \"\",\n      quoteText: \"\",\n      quoteAuthor: \"\",\n      widgets: [\n        {\n          id: \"1\",\n          type: \"greeting\",\n          value: \"\", \n        },\n        {\n          id: \"2\",\n          type: \"time\",\n          value: \"\",\n        },\n        {\n          id: \"3\",\n          type: \"quote\",\n          value: \"\"\n        }\n      ]\n    };\n  }\n\n  toggleSettings = () => {\n    var toggle = \"\"\n    if (this.state.settingsVisible === \"true\") {\n      toggle = \"false\";\n    }\n    else {\n      toggle = \"true\";\n    }\n    this.setState({\n      settingsVisible: toggle\n    }, () => localStorage.setItem(\"state\", JSON.stringify(this.state)))\n  }\n\n  handleNameChange = (e) => {\n    this.setState({\n      widgets: this.state.widgets.map((widget) => {\n        if (widget.id === e.target.id) {\n          widget.value = e.target.value\n        }\n        return widget;\n      })\n    }, () => localStorage.setItem(\"state\", JSON.stringify(this.state)))\n  }\n\n  handleDelete = (e) => {\n    const newWidgetsState = this.state.widgets.filter(widget => e.target.id !== widget.id);\n    this.setState({\n      widgets: newWidgetsState\n    }, () => localStorage.setItem(\"state\", JSON.stringify(this.state)));\n  }\n\n  addNewWidget = (e) => {\n    e.preventDefault();\n    const newWidget = {\n      id: uuid(),\n      type: e.target[0].value,\n      value: \"\"\n    }\n    this.setState({\n      widgets: [...this.state.widgets, newWidget]\n    }, () => localStorage.setItem(\"state\", JSON.stringify(this.state)))\n  }\n\n  getRandomQuote = () => {\n    fetch('https://type.fit/api/quotes')\n      .then(res => res.json())\n      .then(\n      (result) => {\n        var random_num = Math.floor(Math.random() * result.length);\n        this.setState({\n          quoteText: result[random_num].text,\n          quoteAuthor: result[random_num].author\n        })\n      }\n      )\n  }\n\n  getWeatherStatus = (city, id) => {\n    const WEATHER_API_KEY = `${process.env.REACT_APP_WEATHER_API_KEY}`\n    fetch('https://api.openweathermap.org/data/2.5/weather?q=' + city + '&units=metric&appid=' + WEATHER_API_KEY)\n      .then(res => res.json())\n      .then(\n      (result) => {\n        if (result.hasOwnProperty(\"main\")) {\n          this.setState({\n            temp: result.main.temp,\n            feelsLike: result.main.feels_like,\n            clouds: result.weather[0].description\n          }, () => localStorage.setItem(\"state\", JSON.stringify(this.state)));\n        }\n      },\n      (error) => {\n          console.log(\"error\")\n      }\n    )\n}\n\n  handleCityChange = (e) => {\n    if (e.key === \"Enter\") {\n      this.setState({\n        widgets: this.state.widgets.map((widget) => {\n          if (widget.id === e.target.id) {\n            widget.value = e.target.value\n          }\n          return widget;\n        })\n      }, () => localStorage.setItem(\"state\", JSON.stringify(this.state)));\n      this.getWeatherStatus(e.target.value, e.target.id);\n    }\n  }\n\n  tick = () => {\n    var current_time = new Date();\n    this.setState({\n      time: current_time\n    });\n\n    if (current_time.getMinutes() % 5 === 0 && current_time.getSeconds() === 0) {\n      this.setState({\n        refresh: \"true\"\n      }, () => localStorage.setItem(\"state\", JSON.stringify(this.state)));\n    }\n  }\n\n\n  componentDidMount() {\n    const UNSPLASH_API_KEY = `${process.env.REACT_APP_UNSPLASH_API_KEY}`;\n    /*\n    const parsedCount = Number(localStorage.getItem(\"count\") || 0);\n    const getPhoto = String(localStorage.getItem(\"photo\") || \"\");\n    const getRefresh = String(localStorage.getItem(\"refresh\") || \"false\");\n    const getName = String(localStorage.getItem(\"name\") || \"\");\n    */\n\n    var getState = JSON.parse(localStorage.getItem(\"state\"));\n    if (getState === null) {\n      localStorage.setItem(\"state\", JSON.stringify(this.state));\n      getState = JSON.parse(localStorage.getItem(\"state\"));\n    }\n    this.setState(getState);\n\n    // GET photo\n    if (getState.photo === \"\" || getState.refresh === \"true\") {\n      fetch(\"https://api.unsplash.com/collections/764604/photos/?orientation=landscape&per_page=100&client_id=\" + UNSPLASH_API_KEY)\n        .then(res => res.json())\n        .then(\n          (result) => {\n            var random_num = Math.floor(Math.random() * result.length);\n            this.setState({\n              photo: result[random_num].urls.regular,\n              refresh: \"false\"\n            }, () => localStorage.setItem(\"state\", JSON.stringify(this.state)))\n            //localStorage.setItem(\"photo\", result[random_num].urls.regular);\n            //localStorage.setItem(\"refresh\", \"false\");\n          },\n          // Note: it's important to handle errors here\n          // instead of a catch() block so that we don't swallow\n          // exceptions from actual bugs in components.\n          (error) => {\n            console.log(\"error\")\n          }\n        )\n    }\n\n    // GET weather data\n    // this.getWeatherStatus(this.state.city);\n\n    // GET random quote\n    this.getRandomQuote();\n\n    setInterval(() => {\n      this.tick();\n    }, 1000);\n  }\n\n  render(){\n    const current_time = new Date();\n    var greeting = \"\";\n    var ampm = current_time.getHours() >= 12 ? 'PM' : 'AM';\n    if (current_time.getHours() >= 21) {\n      greeting = \"night\";\n    }\n    else if (current_time.getHours() >= 18) {\n      greeting = \"evening\";\n    }\n    else if (current_time.getHours() >= 12) {\n      greeting = \"afternoon\"\n    }\n    else {\n      greeting = \"morning\"\n    }\n\n    return (\n      <div style={{backgroundImage: 'url(' + this.state.photo + ')', width: '100vw', height: '100vh', backgroundSize: 'cover', margin: '0', padding: '0', backgroundRepeat: 'no-repeat'}}>\n        <SettingsBar settingsVisible={this.state.settingsVisible} toggleSettings={this.toggleSettings} handleNameChange={this.handleNameChange} name={this.state.name} city={this.state.city} handleCityChange={this.handleCityChange} addNewWidget={this.addNewWidget} widgets={this.state.widgets} handleDelete={this.handleDelete}/>\n        <div className=\"settings\">\n          <i style={{color: 'white', fontSize: '22px', margin: '7px'}} className=\"fas fa-cog\" onClick={this.toggleSettings}></i>\n          <div style={{float:'right'}}>\n            {this.state.widgets.map((widget) => {\n              if (widget.type === \"weather\") \n                return (<WeatherStatus city={widget.value} feelsLike={this.state.feelsLike} temp={this.state.temp} clouds={this.state.clouds} />)\n            })}\n          </div>\n        </div>\n          <div className=\"centered\" style={{textAlign: 'center'}}>\n          {this.state.widgets.map((widget) => {\n            if (widget.type === \"greeting\") \n              return (<h3 style={{margin: '0', color: 'white'}}>Good {greeting}, {widget.value}</h3>)\n            else if (widget.type === \"quote\") {\n              return (<div><h4 style={{color: 'white'}}>{this.state.quoteText}</h4><h4 style={{color: 'white'}}>- {this.state.quoteAuthor}</h4></div>)\n             }\n            else if (widget.type === \"time\") {\n              return (<h1 style={{margin: '0', color: 'white'}}>{current_time.toLocaleTimeString().split(\":\")[0]}:{current_time.toLocaleTimeString().split(\":\")[1]} {ampm}</h1>)\n             }\n            }\n          )}\n          </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}