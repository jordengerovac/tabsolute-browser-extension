!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.ReactProgressiveGracefulImage=t(require("react")):e.ReactProgressiveGracefulImage=t(e.React)}(window,function(d){return function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t){e.exports=d},function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return n});var i=r(0);r(2);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(e){function o(e){var n,t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=this,r=c(o).call(this,e),l(f(f(n=!r||"object"!==a(r)&&"function"!=typeof r?f(t):r)),"image",void 0),l(f(f(n)),"loadImage",function(e,t){n.image&&(n.image.onload=null,n.image.onerror=null);var r=new Image;(n.image=r).onload=n.onLoad,r.onerror=function(){n.onError,n.handleImageRetries(r)},r.src=e,t&&(r.srcset=t.srcSet,r.sizes=t.sizes)}),l(f(f(n)),"onLoad",function(){n.props.delay?n.setImageWithDelay():n.setImage()}),l(f(f(n)),"setImageWithDelay",function(){setTimeout(function(){n.setImage()},n.props.delay)}),l(f(f(n)),"setImage",function(){n._isMounted&&n.setState({image:n.image.src,loading:!1,srcSetData:{srcSet:n.image.srcset||"",sizes:n.image.sizes||""}})}),l(f(f(n)),"onError",function(e){var t=n.props.onError;t&&t(e)}),n._isMounted=!1,n.state={retryDelay:n.props.retry.delay,retryCount:1,image:e.placeholder,loading:!0,srcSetData:{srcSet:"",sizes:""}},n}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,i["Component"]),t=o,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.src,r=e.srcSetData;this._isMounted=!0,this.loadImage(t,r)}},{key:"componentDidUpdate",value:function(e){var t=this,r=this.props,n=r.src,o=r.placeholder,i=r.srcSetData;n!==e.src&&this.setState({image:o,loading:!0},function(){t.loadImage(n,i)})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.image&&(this.image.onload=null,this.image.onerror=null)}},{key:"handleImageRetries",value:function(e){var t=this;this._isMounted&&this.setState({loading:!0},function(){t.state.retryCount<=t.props.retry.count&&(t.timeout=setTimeout(function(){t._isMounted&&(e.src=t.props.src,t.props.srcSetData&&(e.srcset=t.props.srcSetData.srcSet,e.sizes=t.props.srcSetData.sizes),t.setState(function(e){return{retryDelay:"multiply"===t.props.retry.accumulate?e.retryDelay*t.props.retry.delay:"add"===t.props.retry.accumulate?e.retryDelay+t.props.retry.delay:"noop"===t.props.retry.accumulate?t.props.retry.delay:"multiply",retryCount:e.retryCount+1}}))},1e3*t.state.retryDelay))})}},{key:"render",value:function(){var e=this.state,t=e.image,r=e.loading,n=e.srcSetData,o=this.props,i=o.children,a=o.noRetry;o.retry,o.noLazyLoad;if(a&&(function(e){throw new Error('"'+e+'" is read-only')}("retry"),{count:8,delay:2,accumulate:"multiply"}),!i||"function"!=typeof i)throw new Error("ProgressiveImage requires a function as its only child");return i(t,r,n)}}])&&u(t.prototype,r),n&&u(t,n),o}()},function(o,e,t){(function(e){var v="Expected a function",i=NaN,a="[object Symbol]",u=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,f=/^0o[0-7]+$/i,l=parseInt,t="object"==typeof e&&e&&e.Object===Object&&e,r="object"==typeof self&&self&&self.Object===Object&&self,n=t||r||Function("return this")(),p=Object.prototype.toString,h=Math.max,j=Math.min,S=function(){return n.Date.now()};function y(n,o,e){var i,a,u,c,s,f,l=0,p=!1,y=!1,t=!0;if("function"!=typeof n)throw new TypeError(v);function d(e){var t=i,r=a;return i=a=void 0,l=e,c=n.apply(r,t)}function m(e){var t=e-f;return void 0===f||o<=t||t<0||y&&u<=e-l}function g(){var e,t,r=S();if(m(r))return b(r);s=setTimeout(g,(t=o-((e=r)-f),y?j(t,u-(e-l)):t))}function b(e){return s=void 0,t&&i?d(e):(i=a=void 0,c)}function r(){var e,t=S(),r=m(t);if(i=arguments,a=this,f=t,r){if(void 0===s)return l=e=f,s=setTimeout(g,o),p?d(e):c;if(y)return s=setTimeout(g,o),d(f)}return void 0===s&&(s=setTimeout(g,o)),c}return o=O(o)||0,w(e)&&(p=!!e.leading,u=(y="maxWait"in e)?h(O(e.maxWait)||0,o):u,t="trailing"in e?!!e.trailing:t),r.cancel=function(){void 0!==s&&clearTimeout(s),i=f=a=s=void(l=0)},r.flush=function(){return void 0===s?c:b(S())},r}function w(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function O(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||(r=t)&&"object"==typeof r&&p.call(t)==a)return i;var t,r;if(w(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=w(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(u,"");var o=s.test(e);return o||f.test(e)?l(e.slice(2),o?2:8):c.test(e)?i:+e}o.exports=function(e,t,r){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError(v);return w(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),y(e,t,{leading:n,maxWait:t,trailing:o})}}).call(this,t(3))},function(zc,Ac){var Bc;Bc=function(){return this}();try{Bc=Bc||Function("return this")()||eval("this")}catch(e){"object"==typeof window&&(Bc=window)}zc.exports=Bc}])});